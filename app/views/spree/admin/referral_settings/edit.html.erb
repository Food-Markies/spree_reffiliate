<% content_for :title do %>
  <%= Spree.t(:name, scope: :referral_settings) %>
<% end %>

<% content_for :page_title do %>
  <%= Spree.t(:name, scope: :referral_settings) %>
<% end %>

<%= form_tag admin_referral_settings_path, method: :put do %>
  <div class="row">
    <div class="col-md-4" data-hook="referral_settings">
      <div class="form-group field">
        <%= label_tag 'referral_credits', Spree.t(:credits_to_be_awarded, scope: :referral_settings) %>
          <%= preference_field_tag :referral_credits, Spree::Config[:referral_credits], type: :text_field, class: 'form-control' %>
      </div>

      <div class="checkbox">
        <%= label_tag :referrer_benefit_enabled do %>
          <%= preference_field_tag :referrer_benefit_enabled, Spree::Config[:referrer_benefit_enabled], type: :boolean %>
          <%= Spree.t(:referral_credit_status, scope: :referral_settings) %>
        <% end %>
      </div>

      <% supported_currencies.each do |currency| %>
        <% if Spree::StoreCreditConversionRate.find_by(currency: currency.iso_code).present? %>
          <% rate = Spree::StoreCreditConversionRate.find_by(currency: currency.iso_code).rate %>
        <% else %>
          <% rate = 0 %>
        <% end %>
        <div class="form-group field">
          <%= label_tag "#{currency}_conversion_rate", "#{currency} Store Credit Conversion Rate From USD" %>
          <%= text_field_tag "#{currency}_conversion_rate", rate, type: :text_field, class: 'form-control' %>
        </div>
      <% end %>

      <div class="form-actions" data-hook="buttons">
        <%= button Spree.t('actions.update'), 'update' %>
      </div>
    </div>
  </div>
<% end %>
